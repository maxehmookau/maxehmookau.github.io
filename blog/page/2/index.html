
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Max Woolf - Software Developer</title>
  <meta name="author" content="Max Woolf <maximus@zingysaturn.co.uk>">

  
  <meta name="description" content="Hi. I&#8217;m Max Woolf . Here are some thoughts of mine. Jun 17th, 2013 Comments The Chunky Coder&#8217;s Guide to Losing Weight Some background& &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://maxehmookau.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Max Woolf - Software Developer" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43177900-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/index.html">Blog</a></li>
    
        <li ><a href="/about.html">About</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/maxehmookau" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://twitter.com/maxehmookau" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
    <div class="span12">
      <div class="row-fluid">
        <div id="content">
          <div class="jumbotron">
  <div class="container">
    Hi. I&#8217;m Max Woolf <maximus@zingysaturn.co.uk>.
    <h3 class="tagline">Here are some thoughts of mine.</h3>
  </div>
</div>


<div class="blog-index">
  
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2">
		<h1 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2013-06-17T21:18:00+01:00" pubdate data-updated="true">Jun 17<span>th</span>, 2013</time></h5>
          <div class="row-fluid">
          
          <a href="http://maxehmookau.github.io/blog/2013/06/17/the-chunky-coders-guide-to-losing-weight/#disqus_thread">Comments </a> <span class="fui-bubble-16"></span>
          
          </div>
          
          <div class="row-fluid">
          
          </div>
          
    </div>
    <div class="span10">
      <h1 class="link"><a href="/blog/2013/06/17/the-chunky-coders-guide-to-losing-weight/">The Chunky Coder&#8217;s Guide to Losing Weight</a></h1>
      <h3>Some background&hellip;</h3>

<p>During my three years of being a Computer Science student, I got fat. Like, properly fat. I blame it on a poor diet, no exercise and being a lazy bastard. Mostly because it was my poor diet, lack of exercise and general laziness than caused my BMI to increase from 22 (ideal) to 30 (obese). (I&rsquo;m 5&#8221; 10&#8217;)</p>

<p>I&rsquo;d like to say I spent <em>ages</em> trying to lower my weight because I was aware of the issue. However, that would be a blatent lie. I was partially aware of my increasing weight, but also totally unaware how bad it was getting. Besides, your time at uni is the only time where you can justifiably get fat just because students are lazy and eat lots of pizza. (I should point out, I worked my arse off at uni, just not physically. Most of my work required me to be sat down and eat a lot of junk food.)</p>

<p><strong>I graduated last July with a 2:1 and a weight of 96kg.</strong> This was both excellent (the former) and pretty horriffic (the latter). But obviously, it was my last summer before I became a fully paid-up member of society. So, a couple more months of pigging out was in order. And so it was.
<img src="http://25.media.tumblr.com/03ead7afc3322d30bcd502dab64072de/tumblr_mgsi05jPqW1rairjso1_1280.gif" alt="" /></p>

<p>Then I got a job. And I felt grown up. And I couldn&rsquo;t walk up the stairs without getting out of breath. And bits of me wobbled that shouldn&rsquo;t wobble.
<em>But fuck I <strong>hate</strong> exercise.</em> There are <em>so</em> many other things I could do with the hour it would take me to go on a run. Plus, I was too slow to actually burn any calories. It&rsquo;d be quicker just to starve myself. HA. That&rsquo;s not gonna happen. So I guess I&rsquo;ll just carry on the way I am.</p>

<p>I&rsquo;m wasn&rsquo;t like those super-morbidly obese people you see on telly. &ldquo;I&rsquo;m fine&rdquo;, I thought to myself. In all honesty, I was. It was a bit of extra weight, it certainly wasn&rsquo;t going to kill me.</p>

<p>But then the weight continued to increase. Eventually I realised I needed to do something about it.</p>

<h3>So what did I do?!</h3>

<p>I always wanted to work in software development. That career that requires you to remain seated for 7.5 hours a day, 5 days a week and usually commands the same of you during spare time. It&rsquo;s not exactly condusive to losing weight. After a long day of work, the <em>last</em> thing you want to do is go on a run. I didn&rsquo;t want to go on a run anyway.</p>

<p>My mind is obsessive. It gets obsessed with things I enjoy, quickly. It&rsquo;s a personality that is natually attracted to software development because it&rsquo;s a skill that requires an incredible amount of concentration. Coders like order, right and wrong answers. Losing weight is not, I thought, something that I can apply to my usual <em>&ldquo;do this, get this result&rdquo;</em> way of thinking.</p>

<p><strong>Oh, how wrong I was.</strong></p>

<p>Firstly, nothing I&rsquo;m going to tell you here is magic. It&rsquo;s all horribly common sense. I&rsquo;m not going to write a Ruby gem with a hipster name like <em>fatty</em> that allows you to rig an arduino in to your stomach to remove excess fat. All whilst playing you a selection of cat gifs. But I will impart knowledge on to you that I have found useful.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Fatty</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">make_me</span><span class="p">:</span> <span class="ss">:thin</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Pick ONE exercise</h4>

<p>Geeks (you and me) like to be experts in things. It&rsquo;s no good doing something unless you can become <em>really</em> good at it, right? I&rsquo;m not guaranteeing you&rsquo;ll be the best at whatever exercise you pick, but it&rsquo;s easier to be an expert in one thing than several things. So pick one.</p>

<p>Take your time, you need to stick with it for at least a year. So try a few out.</p>

<ul>
<li><strong>Join a gym</strong>. It wasn&rsquo;t for me personally. But it cost me Â£20 and a few hours of my time to figure out that I didn&rsquo;t enjoy gyms.</li>
<li><strong>Try swimming</strong>. You&rsquo;ll find the water supports your weight, but you have to work harder to notice the difference.</li>
<li><strong>Go running</strong>. (Pick me!) You&rsquo;ll lose weight fast and there&rsquo;s a natural progression.</li>
</ul>


<h4>Surround yourself with people who enjoy exercise</h4>

<p>It&rsquo;s easier than you think.</p>

<ul>
<li>My partner&rsquo;s mother runs marathons for fun.</li>
<li>There are several runners in my place of work.</li>
<li>My previously overweight father took up running.</li>
<li>&hellip;as did my sister.</li>
</ul>


<p>These people are your motivation. Well, people similar to this anyway. You may think all of your friends are all fat slobs. (If that&rsquo;s the case, get some new friends).
I now have spirited conversations about running with various people</p>

<h4>Now go and do it</h4>

<p>I chose running. I&rsquo;ve not lived in Cardiff very long and I don&rsquo;t know the area well except for my immediate location and the area around where I work. Running gave me a great opportunity to explore a new area.</p>

<p>I know you want to become the best runner ever, because that&rsquo;s what you do, <em>become an expert in EVERYTHING</em>. <strong>Tough shit.</strong></p>

<p>Getting to 5k is hard. But worth it. It&rsquo;ll take you 2 months or so, slowly building up the time. Find yourself a &lsquo;Couch to 5k&rsquo; plan and stick to it religiously. There&rsquo;s hundreds out there, each with varying level of annoying pep talks in the background. I prefer my voiceovers quick and to the point. But there&rsquo;s plenty that will encourage you every 2 minutes to carry on because &lsquo;you&rsquo;re doing great&rsquo;. I was finding it hard to believe after I was told how well I was doing, whilst on the floor in pain. I wanted to call the voice in my ears a liar, but didn&rsquo;t want to appear insane.</p>

<h3>BUY ALL THE TECHNOLOGY!</h3>

<p>Gadgets make exercise fun. Get yourself an app that tracks you location, speed, time, maps your route. Get a proper pedometer. Get an app that tracks the calories you eat. Honestly, it&rsquo;s great fun. (No sarcasm, seriously.)
Also, by a pair of running shoes. Get gait analysis. It&rsquo;s yet more cool gadgets to play with. You love gadgets right?</p>

<h4>It&rsquo;s a system. Duh.</h4>

<p>Diets suck. But I found treating my body as a system worked well for my brain.</p>

<p>So if we make the <em>very</em> broad assumption that the number of calories your body hasn&rsquo;t burned at the end of a day gets stored as fat in your body then the fewer calories you eat, the less you will weigh after a while.
Let me spell it out to you in a way you&rsquo;ll understand.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">DAILY_CALS</span> <span class="o">=</span> <span class="mi">2500</span>
</span><span class='line'><span class="k">if</span> <span class="n">todays_calories</span> <span class="o">==</span> <span class="no">DAILY_CALS</span>
</span><span class='line'>  <span class="n">do_nothing</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Great, so if I eat 2500 calories. I&rsquo;ll stay roughly the same weight. Yup.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">todays_calories</span> <span class="o">&gt;</span> <span class="no">DAILY_CALS</span>
</span><span class='line'>  <span class="n">store_excess_as_fat</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">store_excess_as_fat</span>
</span><span class='line'>  <span class="n">put_on_weight</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>And if I eat too much, I&rsquo;ll put on weight? Yup.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">todays_calories</span> <span class="o">&lt;</span> <span class="no">DAILY_CALS</span>
</span><span class='line'>  <span class="n">burn_stored_fat_for_energy</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">burn_stored_fat_for_energy</span>
</span><span class='line'>  <span class="n">lose_weight</span><span class="p">()</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>OH. And if I eat less than 2500 a day, I&rsquo;ll lose weight. Yeah.</p>

<p>I know, I know, it&rsquo;s obvious. And you&rsquo;ve heard it all before. <strong>But it&rsquo;s <em>REALLY</em> important</strong>. But your body is a system. It&rsquo;s more black and white than you previously thought. It&rsquo;s not even about the kinds of foods you eat. Nutritionists and dieticians can piss off. Eat all the chocolate you like as far as I care, just don&rsquo;t eat anything else once you hit 2500 calories that day. You&rsquo;ll feel like shit though, so don&rsquo;t do that.</p>

<h4>What now?</h4>

<p>Stick with it. I can honestly say I started actually losing weight at Christmas last year. It&rsquo;s been a <em>slow</em> process but steady. My BMI is now 27.1 down from 30. My weight loss has been slow, but consistant. I&rsquo;ve not had to make any major adjustments to my lifestyle. Just a bit less chocolate and a bit more running.
<img src="https://trendweight.com/u/dfe8f9a337484c/chart/6m.png" alt="" />
Use something like Trendweight to track your weight too. It filters outliers and only shows your general trend. So if you have a fat day, it won&rsquo;t totally demoralise you.</p>

<p>If you&rsquo;re a software developer who&rsquo;s doing the same thing as me and trying desperate to lose weight. Don&rsquo;t lose heart. You&rsquo;ll get there. But I <strong>really</strong> miss dominos pizza.</p>

      
      
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2">
		<h1 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2013-06-15T09:28:00+01:00" pubdate data-updated="true">Jun 15<span>th</span>, 2013</time></h5>
          <div class="row-fluid">
          
          <a href="http://maxehmookau.github.io/blog/2013/06/15/tywin-lannister-quote/#disqus_thread">Comments </a> <span class="fui-bubble-16"></span>
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/etc/"><span class="badge">etc</span></a>
          
          </div>
          
    </div>
    <div class="span10">
      <h1 class="link"><a href="/blog/2013/06/15/tywin-lannister-quote/">Tywin Lannister Quote</a></h1>
      <p>A nice quote by Tywin Lannister taken from <em>A Storm of Sword</em> book.</p>

<blockquote><p>The greatest fools are ofttimes more clever then the men who laugh at them.</p><footer><strong>Tywin Lannister</strong> <cite>A Storm of Swords</cite></footer></blockquote>


      
      
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2">
		<h1 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2013-05-27T11:18:00+01:00" pubdate data-updated="true">May 27<span>th</span>, 2013</time></h5>
          <div class="row-fluid">
          
          <a href="http://maxehmookau.github.io/blog/2013/05/27/is-web-scraping-ethical/#disqus_thread">Comments </a> <span class="fui-bubble-16"></span>
          
          </div>
          
          <div class="row-fluid">
          
          </div>
          
    </div>
    <div class="span10">
      <h1 class="link"><a href="/blog/2013/05/27/is-web-scraping-ethical/">Is Web Scraping Ethical?</a></h1>
      <p>Last week I released the UkBuses Ruby Gem. It scrapes real-time data from the Traveline site and allows developers to use the data returned as a Hash.  It quickly became the second most weekly starred Ruby repo on GitHub and sparked some interesting debate on Hacker News. There&rsquo;s strong feelings on both sides of the debate but basically no legal precident on the subject. After debating it with friends and collegues, it&rsquo;s clear that nobody really knows. First of all, let&rsquo;s make the question up for debate very clear:</p>

<p><strong>Should it be OK, both legally and morally, for someone to download the HTML output of a <em>non-authenticated</em> webpage and convert it to a format that makes it more easily usable for <em>non-commercial purposes</em>?</strong></p>

<p>There&rsquo;s two important parts to the question that I have posed:</p>

<ol>
<li><p><em>non-authenticated</em> &ndash; In other words, assume that any data to be scraped will respond to a non-authenticated HTTP request and that a typical end-user for that data has not needed to enter any sort of credentials. (OAuth, HTTP Basic or anything!)</p></li>
<li><p><em>non-commercial</em> &ndash; The use of the data scraped should not ultimately be for the generation of revenue; profitable or not.</p></li>
</ol>


<p>My personal belief is that if either of the two previous conditions have been violated then there are <em>serious</em> ethical concerns that need addressing. In the case of the UKBuses gem, the data conforms to both of those conditions, <em>although there is nothing to stop someone from using the gem for commercial means.</em></p>

<p>So here&rsquo;s the arguments that have been put to me and my responses to them. I don&rsquo;t claim to have the right answers and simply seek to spark debate on the subject.</p>

<hr />

<h2>Against</h2>

<blockquote><p>&ldquo;[Company] has paid money to aggregate the data. Why do you have the right to take the data and make it available for free?&rdquo;</p></blockquote>

<p>This is the strongest argument I have heard so far, effectively comparing data scraping to theft making it both illegal and immoral. However, I would only agree with this if the company who held the data made an attempt to restrict access to it by use of a paywall or other authentication. Since we have already agreed that in such cases, scraping <em>would</em> be immoral (and probably illegal.)</p>

<p>However, in the case of the real-time UK bus data, the data is aggregated for the <em>sole</em> purpose of making that data available to the general public at bus stops and on the Traveline website. Therefore, one can only assume that no money has been lost that would otherwise have been made. So in this case, I would propose a counter question:</p>

<blockquote><p>&ldquo;Although [company] has paid money to aggregate the data. Since the data is used on a daily basis by members of the general public, why wouldn&rsquo;t I have the right to make the data available in other formats?&rdquo;</p></blockquote>

<hr />

<h2>For</h2>

<blockquote><p>&ldquo;By heavily restricing access to the data and providing no public API, [company] effectively shields itself from public accontability.&rdquo;</p></blockquote>

<p>Public transport in the UK often gets a bad time in the press for being late. Justifiably. The UK has one of the least punctual and <a href="http://www.businessinsider.com/most-expensive-public-transit-networks-2012-9?op=1">most expensive</a> public transport systems in the world. Yet, despite central government&rsquo;s push to open up more data, the privately owned public transport companies have bucked this trend making real-time data nearly impossible to get hold of.</p>

<p>It is, unfortunately, the transport companies themselves that participate in mutual back-slapping of a job well done when they themselves produce reports in to their punctuality. My old local train company claimed 90% in the last month that I used their services. As an admittedly unscientific sample, I would love to know how they got to that figure. <strong>There was a point where I could organise my day by the very fact that my train from Bournville to Birmingham New Street would be 4 minutes late.</strong></p>

<p>But I digress. The point is that open data creates accountability. I would love to see someone use the UKBuses gem to aggregate data as to how late buses are and see if it matches up with the figures given by the companies themselves.</p>

<p>Central and local government in the UK is opening up more and more data because they have realised that it creates accountability. I would argue that where there is a strong public interest (I hate that phrase.), certain companies should be compelled to open such data. Public transport should fall in to that category.</p>

<p>Yes, I know that the data <em>is</em> technically available. As long as you fill out a lengthy form, comply with various rules and in some cases <em>provide a deposit</em> for any &lsquo;damages&rsquo; caused by whatever your application of the data happens to be. The documentation is in huge PDF files with lengthy examples for how to retrieve the data. This is <strong>boring</strong> and stifles innovation. Coders like data streams to play around with, it&rsquo;s part of the fun of coding. Companies with a strong interest in the general public should understand this and embrace it.</p>

      
      
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2">
		<h1 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2013-05-06T15:19:00+01:00" pubdate data-updated="true">May 6<span>th</span>, 2013</time></h5>
          <div class="row-fluid">
          
          <a href="http://maxehmookau.github.io/blog/2013/05/06/running-ios-unit-tests-automatically-using-ocunit-and-xctool/#disqus_thread">Comments </a> <span class="fui-bubble-16"></span>
          
          </div>
          
          <div class="row-fluid">
          
          </div>
          
    </div>
    <div class="span10">
      <h1 class="link"><a href="/blog/2013/05/06/running-ios-unit-tests-automatically-using-ocunit-and-xctool/">Running iOS Unit Tests Automatically Using OCUnit and xctool</a></h1>
      <p><a href="https://github.com/facebook/xctool">xctool</a> is a new command line tool from Facebook which it claims makes running XCode tests much simpler. <strong>I agree.</strong> Up until now, Apple have still not given developers a simple way to automate running tests at the command line which makes testing a pain and makes continuous integration even more of a pain. It&rsquo;s not impossible, but it&rsquo;s not as simple as it should be.</p>

<p>xctool is a replacement for <code>xcodebuild</code> with a few extra handy features. I&rsquo;m going to show you how to add this to your iOS/OSX project to greatly increase productivity and make testing more fun!</p>

<p>You&rsquo;ll need the following before we get started:</p>

<ul>
<li>Ruby 1.9.3</li>
<li>Bundler</li>
</ul>


<p>Yeah, you heard me. <em>Ruby</em>. We can use the <code>guard</code> gem to watch to changes to our project and then fire off a build in the command line. It&rsquo;s as simple as that. Firstly, we need to create a <code>Gemfile</code> in the root of our project.</p>

<pre><code>$ cd /root/of/xcode/project
$ touch Gemfile
</code></pre>

<p>Open up the <code>Gemfile</code> and add the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">source</span> <span class="o">:</span><span class="n">rubygems</span>
</span><span class='line'><span class="n">gem</span> <span class="err">&#39;</span><span class="n">guard</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="err">&#39;</span><span class="n">guard</span><span class="o">-</span><span class="n">shell</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="err">&#39;</span><span class="n">fsevent</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="o">~&gt;</span> <span class="mf">0.9</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>At the command line, run:</p>

<pre><code>$ bundle install
</code></pre>

<p>This grabs our needed gems and their dependencies. Now we&rsquo;re ready for business.</p>

<p>With <code>guard</code> installed, run <code>guard init shell</code> at the command line. This will create a sample <code>Guardfile</code> to get us started. The <code>Guardfile</code> lists what files to watch for changes and what actions to take when changes are detected.</p>

<p>Open up the <code>Guardfile</code> and add the following lines, I&rsquo;ll run through what they do in a minute:</p>

<figure class='code'><figcaption><span>Guardfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">guard</span> <span class="s1">&#39;shell&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">/(.*).(m|h|mm|hh)/</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Change detected. Running tests...&quot;</span>
</span><span class='line'>    <span class="sb">`../xctool/xctool.sh -project ProjectName.xcodeproj -scheme SchemeName test -reporter plain`</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Line 1: <code>guard 'shell' do</code> tells guard to use the <code>shell</code> plugin we included in our <code>Gemfile</code>.</p>

<p>Line 2: This line watches our source files for changes. XCode includes lots of files, many of which change a lot and we don&rsquo;t want to run our tests everytime those files change. (You might want to, I&rsquo;m assuming you don&rsquo;t.) This is just a regular expression which looks at <em>any</em> file that ends with .h, .m, .hh, or .mm (for you Objective-C++ users out there.)</p>

<p>Lines 3 and 4 alert the user that a file has changed, and line 4 runs <code>xctool</code>. You&rsquo;ll need to change where your <code>xctool</code> is. I keep mine in the root folder of all my personal projects, I tried building a binary and adding it to <code>/usr/bin</code> but I was unable to get it working. You have to pass <code>xctool</code> the project file along with the scheme you want to build. That&rsquo;s all there is to it!</p>

<p>Go to the root of your project and run:</p>

<pre><code>$ guard
</code></pre>

<p>and you&rsquo;re all set. Try opening your XCode project and making a change to a file. Then just watch your command line automatically run all of the tests in your project. No more clicking in XCode, clever huh?</p>

      
      
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2">
		<h1 class="date-time">








  


<i class="icon-calendar-empty"></i> <time datetime="2013-05-04T18:11:00+01:00" pubdate data-updated="true">May 4<span>th</span>, 2013</time></h5>
          <div class="row-fluid">
          
          <a href="http://maxehmookau.github.io/blog/2013/05/04/getting-to-grips-with-core-data/#disqus_thread">Comments </a> <span class="fui-bubble-16"></span>
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/ios/"><span class="badge">ios</span></a>
          
          </div>
          
    </div>
    <div class="span10">
      <h1 class="link"><a href="/blog/2013/05/04/getting-to-grips-with-core-data/">Getting to grips with Core Data</a></h1>
      <p>Most iOS developers will agree, <em>Core Data is <strong>hard</strong></em>. The majority (myself included) will wimp out and go and use SQLite, key-value stores in iCloud or just avoid data persistence all together. But I thought I would finally get over the mental block I had over Core Data and just learn how it works.</p>

<p>I&rsquo;m far from an expert at this point, I&rsquo;ve had 2 days to get my head around the basics and so far I&rsquo;m impressed. Here&rsquo;s what I&rsquo;ve learnt, hopefully it may be useful.</p>

<ul>
<li><strong>Core Data is NOT an ORM</strong>.</li>
</ul>


<p>Admittedly, it&rsquo;s pretty close and it functions a lot like an ORM. But technically, it is a <em>object graph management framework</em>. If you expect to behave exactly like an ORM, you&rsquo;re most likely going to be disappointed. There&rsquo;s no ActiveRecord-style <code>Post.all</code> method to just yank out all records of a certain class.
It differs from an ORM because of its strengths. It is able to deal with potentially <em>huge</em> graphs of related entities with only a limited amount of memory as is often found on mobile devices. (Though less so with the iPhone these days&hellip;) It does this by &lsquo;faulting&rsquo; data in and out of memory. Let me give you an example:
Say we have two entities: <code>Organisation</code> and <code>Person</code>. When retrieving a list of <code>Organisation</code> objects, Core Data will retrieve the list in to memory. It is possible to retrieve the list of <code>People</code> objects in an <code>Organisation</code> <em>even though</em> those people are not actually in memory yet. Core Data <em>&lsquo;faults&rsquo;</em> and retrieves the list of objects in the stated relation, loading only what is needed in to memory at any one time. This approach is <strong>awesome</strong> for low-memory devices.</p>

<ul>
<li><strong>Core Data isn&rsquo;t <em>just</em> an SQLite database</strong></li>
</ul>


<p>Yes, Core Data does use SQLite as its backing storage and in debug mode, you can see the raw SQL statements performed on the database, but don&rsquo;t be fooled, this is simply an implementation detail. The schema may change, unlike the Core Data API. Open up the database and take a look; on large object graphs, it may not look as you expect. Core Data saves the data however it thinks is most efficient, it&rsquo;s not designed for human-readability at the database level.</p>

<ul>
<li><strong>XCode does a lot of the hard-work for you</strong></li>
</ul>


<p>There&rsquo;s a lot of boilerplate code to set up a Core Data stack. But XCode handles this for you, just tick the &lsquo;<strong>Use Core Data</strong>&rsquo; box in XCode and you won&rsquo;t need to worry too much about it. It creates a <strong>Persistant Object Store</strong>, <strong>Managed Object Model</strong> and all that gubbins in your <code>AppDelegate.m</code> file so you can access it Ã  la:</p>

<figure class='code'><figcaption><span>Get hold of a ManagedObjectContext from your AppDelegate</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// At the top of your ViewController</span>
</span><span class='line'><span class="cp">#import &quot;AppDelegate.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// When the ViewController is initialised...</span>
</span><span class='line'><span class="n">AppDelegate</span> <span class="o">*</span><span class="n">appDelegate</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">delegate</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">appDelegate</span> <span class="n">managedObjectContext</span><span class="p">];</span>
</span><span class='line'><span class="c1">// Assigning your AppDelegate in the first step removes the need for casting.</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><strong>Core Data and iCloud don&rsquo;t appear to play nice, yet</strong></li>
</ul>


<p>There have been numerous blog posts about how iCloud doesn&rsquo;t <em>&lsquo;just work&rsquo;</em> like Apple promised it would. Developers were hoping for Core Data stores just to be synced across devices without any problem, apparently that hasn&rsquo;t happened. iOS 7 may answer some of those issues, but we will have to wait and see.</p>

<p>I&rsquo;m still learning a lot about Core Data and there is much left to learn.</p>

      
      
    </div>
  </div>



    </article>
    
  
  <div class="pagination">
    

    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>


        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2014 - Max Woolf <maximus@zingysaturn.co.uk> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
    </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'maxehmookau';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
